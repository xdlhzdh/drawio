<mxfile host="app.diagrams.net" modified="2022-07-05T16:38:51.924Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.124 Safari/537.36 Edg/102.0.1245.44" etag="cVUAgdnZncN9C87zbQN0" version="20.0.3" type="github">
  <diagram id="WpVQEyk78ByjNM30UpTz" name="Page-1">
    <mxGraphModel dx="1422" dy="762" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="bD_4H4n_7uu2J1j26MGU-1" value="&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot; face=&quot;Verdana&quot;&gt;1. 150M分成30个frequency block同时去申请grant和HB，中间如果出现以下ec就丢弃，剩下的继续往前走，直至HB成功（如果出现其它的ec，采用legacy的逻辑处理）&lt;br&gt;&amp;nbsp; &amp;nbsp;400 401 500 501 502，其中，501 502需要relinquish自己&lt;br&gt;&amp;nbsp; &amp;nbsp;所有HB成功的grant作为available channel做频谱选择算法，分配的结果以channel merge后的形式发给NRTS（包括chbw的low high，maxEirp取最小，rassi取平均），但是与SAS依然以5M的频段进行交互&lt;br&gt;&amp;nbsp; &amp;nbsp;在runtime阶段，当其中某些5M的grant发生ec（500 501 502），判断当前authorized的cell是否包含这些grant，如果有的的话，分别做如下处理：&lt;br&gt;&amp;nbsp; &amp;nbsp;a. 500 -&amp;gt; cell idle， 然后用推荐参数去grant/HB，成功之后用推荐参数的grant作为available channel做频谱选择，如果能选出来，直接替换cell的频段，状态更新到authorized；如果选不出来，则跟已有的HB成功但没有分配Cell的grant一起作为available channel做频谱选择; 或者改算法，使用推荐参数的带宽越多越好&lt;br&gt;&amp;nbsp; &amp;nbsp;b. 501 -&amp;gt; cell granted, 然后用推荐参数去grant/HB，成功之后用推荐参数的grant作为available channel做频谱选择，如果能选出来，直接替换cell的频段，状态更新到authorized；如果选不出来，则跟已有的HB成功但没有分配Cell的grant一起作为available channel做频谱选择;&lt;br&gt;&amp;nbsp; &amp;nbsp;c. 502 -&amp;gt; cell idle，当前的cell的grant relinquish掉；然后用已有的HB成功但没有分配Cell的grant一起作为available channel做频谱选择;&amp;nbsp;&lt;br&gt;2. 关于SasQueryTimer超时：&lt;br&gt;&amp;nbsp; &amp;nbsp;刨掉已经granted/authorized的频段，剩下的频段发SI，走grant/HB，将HB成功的grant和已经authorized的grant一起作为available channel然后重新计算，如果有PAL change，则apply PAL change，如果没有，则升级grant&lt;br&gt;&amp;nbsp; &amp;nbsp;open issue：起timer的条件或者是重新计算的条件&lt;br&gt;&amp;nbsp; &amp;nbsp;&lt;br&gt;3. 当前场景的判断条件需要define：&lt;br&gt;&amp;nbsp; &amp;nbsp;引入新的NIDD还是根据Cell配置(have one cell &amp;gt; 20M)?&lt;br&gt;&amp;nbsp; &amp;nbsp;不考虑SBTS(另外的feature去cover)&lt;br&gt;4. 配置变化：&lt;br&gt;&amp;nbsp; &amp;nbsp;从当前场景切换的其它场景：全部relinquish，重新计算&lt;br&gt;&amp;nbsp; &amp;nbsp;从其它场景切换的当前场景：全部relinquish，重新计算&lt;br&gt;&amp;nbsp; &amp;nbsp;从当前场景切换到当前场景(比如在10M-100M Cell基础上新增一个cell)：重新计算&lt;/font&gt;&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="820" width="1080" height="660" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
